var q=Object.defineProperty;var Q=(a,t,r)=>t in a?q(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;var N=(a,t,r)=>(Q(a,typeof t!="symbol"?t+"":t,r),r);import{r as f,a as X,R as ee}from"./vendor-8a332d8f.js";import{a as A}from"./http-b5ee139b.js";import{G as te}from"./globe-f56a4337.js";import{C as re,a as ne,L as ae,P as oe,b as le,B as ie,p as se,c as ce,d as de,e as w}from"./charts-74726838.js";import"./three-3ff31a8f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const s of d.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();var W={exports:{}},E={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ge=f,fe=Symbol.for("react.element"),he=Symbol.for("react.fragment"),me=Object.prototype.hasOwnProperty,ue=ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pe={key:!0,ref:!0,__self:!0,__source:!0};function H(a,t,r){var n,l={},d=null,s=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)me.call(t,n)&&!pe.hasOwnProperty(n)&&(l[n]=t[n]);if(a&&a.defaultProps)for(n in t=a.defaultProps,t)l[n]===void 0&&(l[n]=t[n]);return{$$typeof:fe,type:a,key:d,ref:s,props:l,_owner:ue.current}}E.Fragment=he;E.jsx=H;E.jsxs=H;W.exports=E;var e=W.exports,z={},D=X;z.createRoot=D.createRoot,z.hydrateRoot=D.hydrateRoot;const be="http://localhost:3002/api";class xe{constructor(){N(this,"api",A.create({baseURL:be,timeout:1e4}))}async getGlobalData(){try{return(await this.api.get("/global")).data}catch(t){throw console.error("Error fetching global data:",t),t}}async getCountries(){try{return(await this.api.get("/countries")).data}catch(t){throw console.error("Error fetching countries data:",t),t}}async getCountryHistory(t){try{return(await this.api.get(`/historical/${t}`)).data}catch(r){throw console.error(`Error fetching historical data for ${t}:`,r),r}}}const B=new xe,ye=()=>{const[a,t]=f.useState(null),[r,n]=f.useState([]),[l,d]=f.useState(null),[s,m]=f.useState(null),[i,o]=f.useState(!0);return f.useEffect(()=>{(async()=>{o(!0);try{const[x,c]=await Promise.all([B.getGlobalData(),B.getCountries()]),p=c.filter(y=>{const{lat:h,long:C}=y.countryInfo;return h!==null&&C!==null&&!isNaN(h)&&!isNaN(C)&&h>=-90&&h<=90&&C>=-180&&C<=180});t(x),n(p)}catch(x){console.error("Error fetching initial data",x)}finally{o(!1)}})()},[]),{globalData:a,countries:r,selectedCountry:l,countryHistory:s,loading:i,fetchCountryHistory:async S=>{o(!0);try{const x=await B.getCountryHistory(S);m(x);const c=r.find(p=>p.countryInfo.iso2===S);d(c||null)}catch(x){console.error(`Error fetching history for ${S}`,x)}finally{o(!1)}}}},Se=({globalData:a,selectedDisease:t})=>{if(!a)return e.jsx("div",{children:"Loading..."});const n=(()=>{var l,d;return(t==null?void 0:t.code)==="HIV_ARTCOVERAGE"?{metric1:"People in Treatment",metric2:"Highest Country Treatment",metric3:"Average per Country",metric4:"Countries with Data",suffix1:"",suffix2:"",suffix3:"",suffix4:""}:(t==null?void 0:t.source)==="covid"?{metric1:"Total Cases",metric2:"Total Deaths",metric3:"Total Recovered",metric4:"Active Cases",suffix1:"",suffix2:"",suffix3:"",suffix4:""}:(l=t==null?void 0:t.code)!=null&&l.startsWith("MENING_")?{metric1:"Total Cases",metric2:"Not Available",metric3:"Not Available",metric4:"Countries Affected",suffix1:"",suffix2:"",suffix3:"",suffix4:""}:(d=t==null?void 0:t.code)!=null&&d.startsWith("TB_")?{metric1:"Total Incidence",metric2:"Not Available",metric3:"Not Available",metric4:"Countries Affected",suffix1:" per 100k",suffix2:"",suffix3:"",suffix4:""}:{metric1:"Total Cases",metric2:"Not Available",metric3:"Not Available",metric4:"Countries Affected",suffix1:"",suffix2:"",suffix3:"",suffix4:""}})();return e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.8)",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:[e.jsxs("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#f8fafc"},children:[(t==null?void 0:t.name)||"Global"," Overview"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:n.metric1}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#fbbf24"},children:[a.cases.toLocaleString(),n.suffix1]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:n.metric2}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#ef4444"},children:[a.deaths.toLocaleString(),n.suffix2]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:n.metric3}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981"},children:[a.recovered.toLocaleString(),n.suffix3]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:n.metric4}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b"},children:[a.active.toLocaleString(),n.suffix4]})]})]})]})},Ce=({country:a})=>a?e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.8)",padding:"1.5rem",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("img",{src:a.countryInfo.flag,alt:`${a.country} flag`,style:{width:"48px",height:"32px",marginRight:"1rem",borderRadius:"4px",objectFit:"cover"}}),e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f8fafc"},children:a.country})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Total Cases"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#fbbf24"},children:a.cases.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Total Deaths"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#ef4444"},children:a.deaths.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Total Recovered"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:a.recovered.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Active Cases"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#f59e0b"},children:a.active.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Population"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#8b5cf6"},children:a.population.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.25rem"},children:"Tests Conducted"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#06b6d4"},children:a.tests.toLocaleString()})]})]})]}):e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.8)",padding:"1.5rem",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#f8fafc"},children:"Country Dashboard"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:"Select a country on the globe to see details."})]}),ve=({countries:a,onCountryClick:t})=>{const r=f.useRef(),n=f.useRef(null),[l,d]=f.useState(800),[s,m]=f.useState(600);return f.useEffect(()=>{const i=()=>{if(n.current){const g=n.current.getBoundingClientRect();d(g.width),m(g.height)}},o=()=>{i()};return window.addEventListener("resize",o),i(),r.current&&r.current.pointOfView({lat:20,lng:0,altitude:2.5}),()=>{window.removeEventListener("resize",o)}},[]),e.jsx("div",{ref:n,style:{width:"100%",height:"100%"},children:e.jsx(te,{ref:r,width:l,height:s,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-blue-marble.jpg",pointsData:a,pointsMerge:!0,pointResolution:8,pointLat:i=>!i.countryInfo||typeof i.countryInfo.lat>"u"?(console.error("Invalid country data for latitude:",i),0):i.countryInfo.lat,pointLng:i=>!i.countryInfo||typeof i.countryInfo.long>"u"?(console.error("Invalid country data for longitude:",i),0):i.countryInfo.long,pointAltitude:i=>i.cases<=100?Math.max(.02,Math.sqrt(i.cases)/200):i.cases<=1e5?Math.max(.02,Math.sqrt(i.cases)/2e3):Math.max(.02,Math.sqrt(i.cases)/85e4),pointRadius:i=>i.cases<=100?Math.max(.15,Math.sqrt(i.cases)/20):i.cases<=1e5?Math.max(.15,Math.sqrt(i.cases)/100):Math.max(.02,Math.sqrt(i.cases)/4e3),pointColor:i=>{const o=i.cases;return o<=100?o<25?"#ef4444":o<50?"#f97316":o<75?"#eab308":"#22c55e":o<=1e5?o<100?"#22c55e":o<1e3?"#eab308":o<1e4?"#f97316":"#ef4444":o<1e4?"#22c55e":o<1e5?"#eab308":o<1e6?"#f97316":o<5e6?"#ef4444":"#991b1b"},pointLabel:i=>`
          <div style="
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            max-width: 200px;
          ">
            <div style="font-weight: bold; font-size: 14px; margin-bottom: 8px; color: #fca5a5;">${i.country}</div>
            <div style="font-size: 12px; margin-bottom: 4px;">📊 Cases: <span style="color: #fbbf24;">${i.cases.toLocaleString()}</span></div>
            <div style="font-size: 12px; margin-bottom: 4px;">💀 Deaths: <span style="color: #ef4444;">${i.deaths.toLocaleString()}</span></div>
            <div style="font-size: 12px; margin-bottom: 4px;">✅ Recovered: <span style="color: #10b981;">${i.recovered.toLocaleString()}</span></div>
            <div style="font-size: 10px; color: #9ca3af; margin-top: 8px; text-align: center;">Click for details</div>
          </div>
        `,onPointClick:i=>{t(i)}})})},je=({country:a,isOpen:t,onClose:r})=>{var n,l;return!t||!a?null:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",borderRadius:"16px",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflowY:"auto",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("img",{src:a.countryInfo.flag,alt:`${a.country} flag`,style:{width:"48px",height:"32px",marginRight:"1rem",borderRadius:"4px",objectFit:"cover"}}),e.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#f8fafc",margin:0},children:a.country})]}),e.jsx("button",{onClick:r,style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#ef4444",padding:"0.5rem",cursor:"pointer",fontSize:"1.25rem",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:"×"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"rgba(251, 191, 36, 0.1)",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"12px",padding:"1rem"},children:[e.jsx("p",{style:{color:"#fbbf24",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Cases"}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f8fafc",margin:0},children:a.cases.toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"1rem"},children:[e.jsx("p",{style:{color:"#ef4444",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Deaths"}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f8fafc",margin:0},children:a.deaths.toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"1rem"},children:[e.jsx("p",{style:{color:"#10b981",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Recovered"}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f8fafc",margin:0},children:a.recovered.toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"12px",padding:"1rem"},children:[e.jsx("p",{style:{color:"#f59e0b",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Active Cases"}),e.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f8fafc",margin:0},children:a.active.toLocaleString()})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"12px",padding:"1rem"},children:[e.jsx("p",{style:{color:"#8b5cf6",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Population"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#f8fafc",margin:0},children:a.population.toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(6, 182, 212, 0.1)",border:"1px solid rgba(6, 182, 212, 0.3)",borderRadius:"12px",padding:"1rem"},children:[e.jsx("p",{style:{color:"#06b6d4",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Tests Conducted"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#f8fafc",margin:0},children:a.tests.toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(168, 85, 247, 0.1)",border:"1px solid rgba(168, 85, 247, 0.3)",borderRadius:"12px",padding:"1rem"},children:[e.jsx("p",{style:{color:"#a855f7",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Cases per Million"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#f8fafc",margin:0},children:((n=a.casesPerOneMillion)==null?void 0:n.toLocaleString())||"N/A"})]}),e.jsxs("div",{style:{background:"rgba(236, 72, 153, 0.1)",border:"1px solid rgba(236, 72, 153, 0.3)",borderRadius:"12px",padding:"1rem"},children:[e.jsx("p",{style:{color:"#ec4899",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Deaths per Million"}),e.jsx("p",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#f8fafc",margin:0},children:((l=a.deathsPerOneMillion)==null?void 0:l.toLocaleString())||"N/A"})]})]})]})})},Re=({countries:a,onOpenComparison:t})=>{const[r,n]=f.useState([]),[l,d]=f.useState(!1),s=o=>{r.includes(o)?n(r.filter(g=>g!==o)):r.length<5&&n([...r,o])},m=o=>{n(r.filter(g=>g!==o))},i=o=>{const g=a.find(S=>S.countryInfo.iso2===o);return(g==null?void 0:g.country)||o};return e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.8)",padding:"1.5rem",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",height:"fit-content"},children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#f8fafc"},children:"Country Comparison"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("button",{onClick:()=>d(!l),style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"0.5rem 1rem",color:"#93c5fd",fontSize:"0.875rem",cursor:"pointer",width:"100%",textAlign:"left",marginBottom:"0.5rem"},children:[l?"Hide Countries":"Select Countries"," (",r.length,"/5)"]}),l&&e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",background:"rgba(15, 23, 42, 0.8)"},children:a.slice(0,50).map(o=>e.jsx("button",{onClick:()=>s(o.countryInfo.iso2),style:{display:"block",width:"100%",padding:"0.5rem 0.75rem",textAlign:"left",fontSize:"0.875rem",border:"none",background:r.includes(o.countryInfo.iso2)?"rgba(59, 130, 246, 0.3)":"transparent",color:r.includes(o.countryInfo.iso2)?"#93c5fd":"#cbd5e1",cursor:r.length>=5&&!r.includes(o.countryInfo.iso2)?"not-allowed":"pointer",opacity:r.length>=5&&!r.includes(o.countryInfo.iso2)?.5:1},disabled:r.length>=5&&!r.includes(o.countryInfo.iso2),onMouseEnter:g=>{!r.includes(o.countryInfo.iso2)&&r.length<5&&(g.target.style.background="rgba(71, 85, 105, 0.3)")},onMouseLeave:g=>{r.includes(o.countryInfo.iso2)||(g.target.style.background="transparent")},children:o.country},o.countryInfo.iso2))})]}),r.length>0&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Selected Countries:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:r.map(o=>e.jsxs("span",{style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"16px",padding:"0.25rem 0.75rem",fontSize:"0.75rem",color:"#93c5fd",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i(o),e.jsx("button",{onClick:()=>m(o),style:{background:"none",border:"none",color:"#f87171",cursor:"pointer",fontSize:"0.875rem",lineHeight:1},children:"×"})]},o))})]}),r.length>=2&&e.jsx("button",{onClick:()=>t(r),style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(59, 130, 246, 0.2))",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"#10b981",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",width:"100%"},children:"📊 View Comparison Charts"}),r.length<2&&e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",textAlign:"center",padding:"1rem"},children:"Select at least 2 countries to compare their COVID-19 data."})]})};re.register(ne,ae,oe,le,ie,se,ce,de);const Me=({isOpen:a,onClose:t,selectedCountries:r,countries:n})=>{const[l,d]=f.useState([]),[s,m]=f.useState(!1);f.useEffect(()=>{a&&r.length>0&&i()},[a,r]);const i=async()=>{m(!0);try{const c=await Promise.all(r.map(async p=>{try{const y=await B.getCountryHistory(p),h=n.find(C=>C.countryInfo.iso2===p);return{country:(h==null?void 0:h.country)||p,data:y,currentCases:(h==null?void 0:h.cases)||0,currentDeaths:(h==null?void 0:h.deaths)||0,currentRecovered:(h==null?void 0:h.recovered)||0}}catch(y){return console.error(`Error fetching data for ${p}:`,y),null}}));d(c.filter(p=>p!==null))}catch(c){console.error("Error fetching comparison data:",c)}finally{m(!1)}};if(!a)return null;const o={labels:l.map(c=>c.country),datasets:[{label:"Total Cases",data:l.map(c=>c.currentCases),backgroundColor:"rgba(251, 191, 36, 0.6)",borderColor:"rgba(251, 191, 36, 1)",borderWidth:2}]},g={labels:l.map(c=>c.country),datasets:[{label:"Total Deaths",data:l.map(c=>c.currentDeaths),backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2}]},S={labels:l.map(c=>c.country),datasets:[{label:"Total Recovered",data:l.map(c=>c.currentRecovered),backgroundColor:"rgba(16, 185, 129, 0.6)",borderColor:"rgba(16, 185, 129, 1)",borderWidth:2}]},x={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#f8fafc",font:{size:12}}},title:{display:!1}},scales:{x:{ticks:{color:"#94a3b8",font:{size:11}},grid:{color:"rgba(255, 255, 255, 0.1)"}},y:{ticks:{color:"#94a3b8",font:{size:11}},grid:{color:"rgba(255, 255, 255, 0.1)"}}}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:t,children:e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.95)",borderRadius:"16px",padding:"2rem",maxWidth:"80vw",maxHeight:"80vh",overflow:"auto",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)"},onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#f8fafc",margin:0},children:"Country Comparison"}),e.jsx("button",{onClick:t,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#f87171",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:"×"})]}),s?e.jsxs("div",{style:{textAlign:"center",color:"#f8fafc",padding:"2rem"},children:[e.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid rgba(255, 255, 255, 0.3)",borderTop:"3px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),"Loading comparison data..."]}):l.length>0?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"500",color:"#fbbf24",marginBottom:"1rem"},children:"Total Cases"}),e.jsx("div",{style:{height:"250px"},children:e.jsx(w,{data:o,options:x})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"500",color:"#ef4444",marginBottom:"1rem"},children:"Total Deaths"}),e.jsx("div",{style:{height:"250px"},children:e.jsx(w,{data:g,options:x})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"1.125rem",fontWeight:"500",color:"#10b981",marginBottom:"1rem"},children:"Total Recovered"}),e.jsx("div",{style:{height:"250px"},children:e.jsx(w,{data:S,options:x})})]})]}):e.jsx("p",{style:{color:"#94a3b8",textAlign:"center",padding:"2rem"},children:"No data available for the selected countries."})]})})},Ne=({onDiseaseSelect:a,selectedDisease:t})=>{const[r,n]=f.useState(!1),l=[{id:"covid-19",name:"COVID-19",code:"COVID19",description:"Coronavirus Disease 2019",source:"covid",color:"#ef4444",icon:"🦠"},{id:"meningitis",name:"Meningitis",code:"MENING_2",description:"Meningitis suspected cases",source:"who-gho",color:"#f59e0b",icon:"🧠"},{id:"hiv",name:"HIV/AIDS",code:"HIV_ARTCOVERAGE",description:"HIV antiretroviral therapy coverage",source:"who-gho",color:"#8b5cf6",icon:"🎗️"},{id:"tuberculosis",name:"Tuberculosis",code:"TB_1",description:"Estimated TB incidence",source:"who-gho",color:"#10b981",icon:"🫁"},{id:"leptospirosis",name:"Leptospirosis",code:"LEPTO_MORTALITY",description:"Estimated leptospirosis deaths",source:"who-gho",color:"#84cc16",icon:"🐀"},{id:"hepatitis",name:"Hepatitis B",code:"WHS4_543",description:"Hepatitis B surface antigen prevalence",source:"who-gho",color:"#f97316",icon:"🦠"},{id:"measles",name:"Measles",code:"WHS4_544",description:"Measles vaccination coverage",source:"who-gho",color:"#ec4899",icon:"🤒"}],d=s=>{a(s),n(!1)};return e.jsxs("div",{style:{background:"rgba(30, 41, 59, 0.8)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",position:"relative"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.75rem",color:"#f8fafc"},children:"Select Disease to Track"}),e.jsxs("button",{onClick:()=>n(!r),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"0.75rem",background:"rgba(15, 23, 42, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#f8fafc",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1.125rem"},children:(t==null?void 0:t.icon)||"🌍"}),e.jsx("span",{style:{fontWeight:"500"},children:(t==null?void 0:t.name)||"Select a disease..."})]}),e.jsx("span",{style:{transform:r?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease",fontSize:"0.75rem"},children:"▼"})]}),r&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:"rgba(15, 23, 42, 0.95)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",backdropFilter:"blur(20px)",zIndex:9999,maxHeight:"300px",overflowY:"auto"},children:l.map(s=>e.jsx("button",{onClick:()=>d(s),style:{display:"block",width:"100%",padding:"0.75rem",textAlign:"left",border:"none",background:(t==null?void 0:t.id)===s.id?"rgba(59, 130, 246, 0.2)":"transparent",color:(t==null?void 0:t.id)===s.id?"#93c5fd":"#cbd5e1",cursor:"pointer",fontSize:"0.875rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},onMouseEnter:m=>{(t==null?void 0:t.id)!==s.id&&(m.target.style.background="rgba(71, 85, 105, 0.3)")},onMouseLeave:m=>{(t==null?void 0:t.id)!==s.id&&(m.target.style.background="transparent")},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.125rem"},children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500",marginBottom:"0.125rem"},children:s.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#94a3b8",marginBottom:"0.25rem"},children:s.description}),e.jsx("div",{style:{fontSize:"0.625rem",color:s.source==="covid"?"#fbbf24":"#10b981",fontWeight:"500",textTransform:"uppercase"},children:s.source==="covid"?"Disease.sh API":"WHO API"})]})]})},s.id))})]})};class Ae{constructor(){N(this,"flagCache",new Map);N(this,"nameCache",new Map);N(this,"countriesCache",null)}async initialize(){this.countriesCache||await this.fetchCountryFlags()}async fetchCountryFlags(){var t;if(this.countriesCache)return this.countriesCache;try{const r=await A.get("http://localhost:3002/api/countries",{timeout:5e3,headers:{Accept:"application/json","Cache-Control":"public, max-age=3600"}});return this.countriesCache=r.data.map(n=>({iso2:n.countryInfo.iso2,iso3:n.countryInfo.iso3,flag:n.countryInfo.flag,name:n.country})),(t=this.countriesCache)==null||t.forEach(n=>{n.iso2&&(this.flagCache.set(n.iso2,n.flag),this.nameCache.set(n.iso2,n.name)),n.iso3&&(this.flagCache.set(n.iso3,n.flag),this.nameCache.set(n.iso3,n.name))}),this.countriesCache||[]}catch(r){return console.error("Error fetching country flags:",r),[]}}async getFlagByCode(t){return this.flagCache.has(t)?this.flagCache.get(t):(await this.fetchCountryFlags(),this.flagCache.has(t)?this.flagCache.get(t):`https://disease.sh/assets/img/flags/${t.length===2?t.toLowerCase():this.getISO2FromISO3(t)}.png`)}async getCountryNameByCode(t){if(this.nameCache.has(t))return this.nameCache.get(t);if(await this.fetchCountryFlags(),this.nameCache.has(t))return this.nameCache.get(t);const r={SDN:"Sudan",SSD:"South Sudan",COD:"Democratic Republic of Congo",COG:"Republic of Congo",CAF:"Central African Republic",TCD:"Chad",GIN:"Guinea",GNB:"Guinea-Bissau",CIV:"Ivory Coast",SLE:"Sierra Leone",LBR:"Liberia",BFA:"Burkina Faso",NER:"Niger",TGO:"Togo",BEN:"Benin",GHA:"Ghana",MLI:"Mali",SEN:"Senegal",GMB:"Gambia",MRT:"Mauritania",DZA:"Algeria",MAR:"Morocco",TUN:"Tunisia",EGY:"Egypt",LBY:"Libya",ETH:"Ethiopia",ERI:"Eritrea",KEN:"Kenya",TZA:"Tanzania",UGA:"Uganda",RWA:"Rwanda",BDI:"Burundi"};return r[t]?r[t]:this.cleanCountryCode(t)}cleanCountryCode(t){return{USA:"United States",GBR:"United Kingdom",DEU:"Germany",FRA:"France",ITA:"Italy",ESP:"Spain",RUS:"Russia",CHN:"China",JPN:"Japan",KOR:"South Korea",PRK:"North Korea",IND:"India",PAK:"Pakistan",BGD:"Bangladesh",IDN:"Indonesia",THA:"Thailand",VNM:"Vietnam",PHL:"Philippines",MYS:"Malaysia",SGP:"Singapore"}[t]||t}getISO2FromISO3(t){return{AFG:"af",ALB:"al",DZA:"dz",AND:"ad",AGO:"ao",ATG:"ag",ARG:"ar",ARM:"am",AUS:"au",AUT:"at",AZE:"az",BHS:"bs",BHR:"bh",BGD:"bd",BRB:"bb",BLR:"by",BEL:"be",BLZ:"bz",BEN:"bj",BTN:"bt",BOL:"bo",BIH:"ba",BWA:"bw",BRA:"br",BRN:"bn",BGR:"bg",BFA:"bf",BDI:"bi",CPV:"cv",KHM:"kh",CMR:"cm",CAN:"ca",CAF:"cf",TCD:"td",CHL:"cl",CHN:"cn",COL:"co",COM:"km",COG:"cg",COD:"cd",CRI:"cr",CIV:"ci",HRV:"hr",CUB:"cu",CYP:"cy",CZE:"cz",DNK:"dk",DJI:"dj",DMA:"dm",DOM:"do",ECU:"ec",EGY:"eg",SLV:"sv",GNQ:"gq",ERI:"er",EST:"ee",ETH:"et",FJI:"fj",FIN:"fi",FRA:"fr",GAB:"ga",GMB:"gm",GEO:"ge",DEU:"de",GHA:"gh",GRC:"gr",GRD:"gd",GTM:"gt",GIN:"gn",GNB:"gw",GUY:"gy",HTI:"ht",HND:"hn",HUN:"hu",ISL:"is",IND:"in",IDN:"id",IRN:"ir",IRQ:"iq",IRL:"ie",ISR:"il",ITA:"it",JAM:"jm",JPN:"jp",JOR:"jo",KAZ:"kz",KEN:"ke",KIR:"ki",PRK:"kp",KOR:"kr",KWT:"kw",KGZ:"kg",LAO:"la",LVA:"lv",LBN:"lb",LSO:"ls",LBR:"lr",LBY:"ly",LIE:"li",LTU:"lt",LUX:"lu",MKD:"mk",MDG:"mg",MWI:"mw",MYS:"my",MDV:"mv",MLI:"ml",MLT:"mt",MHL:"mh",MRT:"mr",MUS:"mu",MEX:"mx",FSM:"fm",MDA:"md",MCO:"mc",MNG:"mn",MNE:"me",MAR:"ma",MOZ:"mz",MMR:"mm",NAM:"na",NRU:"nr",NPL:"np",NLD:"nl",NZL:"nz",NIC:"ni",NER:"ne",NGA:"ng",NOR:"no",OMN:"om",PAK:"pk",PLW:"pw",PAN:"pa",PNG:"pg",PRY:"py",PER:"pe",PHL:"ph",POL:"pl",PRT:"pt",QAT:"qa",ROU:"ro",RUS:"ru",RWA:"rw",KNA:"kn",LCA:"lc",VCT:"vc",WSM:"ws",SMR:"sm",STP:"st",SAU:"sa",SEN:"sn",SRB:"rs",SYC:"sc",SLE:"sl",SGP:"sg",SVK:"sk",SVN:"si",SLB:"sb",SOM:"so",ZAF:"za",SSD:"ss",ESP:"es",LKA:"lk",SDN:"sd",SUR:"sr",SWZ:"sz",SWE:"se",CHE:"ch",SYR:"sy",TWN:"tw",TJK:"tj",TZA:"tz",THA:"th",TLS:"tl",TGO:"tg",TON:"to",TTO:"tt",TUN:"tn",TUR:"tr",TKM:"tm",TUV:"tv",UGA:"ug",UKR:"ua",ARE:"ae",GBR:"gb",USA:"us",URY:"uy",UZB:"uz",VUT:"vu",VEN:"ve",VNM:"vn",YEM:"ye",ZMB:"zm",ZWE:"zw"}[t]||t.toLowerCase().substring(0,2)}}const O=new Ae;class Te{constructor(){N(this,"backendBaseURL","http://localhost:3002/api/who")}async getIndicators(){try{const t=await A.get(`${this.backendBaseURL}/indicators`);return t.data.value||t.data}catch(t){throw console.error("Error fetching WHO indicators:",t),t}}async getDiseaseData(t){try{if(t.source==="who-gho"){const r=await A.get(`${this.backendBaseURL}/data/${t.code}`);return r.data.value||r.data||[]}else if(t.source==="who-outbreaks"){const r=await A.get(`${this.backendBaseURL}/outbreaks`);return r.data.value||r.data||[]}return[]}catch(r){return console.error(`Error fetching data for ${t.name}:`,r),[]}}async getCountryDimensions(){try{const t=await A.get(`${this.backendBaseURL}/countries`);return t.data.value||t.data||[]}catch(t){return console.error("Error fetching country dimensions:",t),[]}}getCountryCoordinates(t){return{AFG:{lat:33.93911,lng:67.709953},ALB:{lat:41.153332,lng:20.168331},DZA:{lat:28.033886,lng:1.659626},AND:{lat:42.506285,lng:1.521801},AGO:{lat:-11.202692,lng:17.873887},ATG:{lat:17.060816,lng:-61.796428},ARG:{lat:-38.416097,lng:-63.616672},ARM:{lat:40.069099,lng:45.038189},AUS:{lat:-25.274398,lng:133.775136},AUT:{lat:47.516231,lng:14.550072},AZE:{lat:40.143105,lng:47.576927},BHS:{lat:25.03428,lng:-77.39628},BHR:{lat:25.930414,lng:50.637772},BGD:{lat:23.684994,lng:90.356331},BRB:{lat:13.193887,lng:-59.543198},BLR:{lat:53.709807,lng:27.953389},BEL:{lat:50.503887,lng:4.469936},BLZ:{lat:17.189877,lng:-88.49765},BEN:{lat:9.30769,lng:2.315834},BTN:{lat:27.514162,lng:90.433601},BOL:{lat:-16.290154,lng:-63.588653},BIH:{lat:43.915886,lng:17.679076},BWA:{lat:-22.328474,lng:24.684866},BRA:{lat:-14.235004,lng:-51.92528},BRN:{lat:4.535277,lng:114.727669},BGR:{lat:42.733883,lng:25.48583},BFA:{lat:12.238333,lng:-1.561593},BDI:{lat:-3.373056,lng:29.918886},CPV:{lat:16.002082,lng:-24.013197},KHM:{lat:12.565679,lng:104.990963},CMR:{lat:7.369722,lng:12.354722},CAN:{lat:56.130366,lng:-106.346771},CAF:{lat:6.611111,lng:20.939444},TCD:{lat:15.454166,lng:18.732207},CHL:{lat:-35.675147,lng:-71.542969},CHN:{lat:35.86166,lng:104.195397},COL:{lat:4.570868,lng:-74.297333},COM:{lat:-11.875001,lng:43.872219},COG:{lat:-.228021,lng:15.827659},COD:{lat:-4.038333,lng:21.758664},CRI:{lat:9.748917,lng:-83.753428},CIV:{lat:7.539989,lng:-5.54708},HRV:{lat:45.1,lng:15.2},CUB:{lat:21.521757,lng:-77.781167},CYP:{lat:35.126413,lng:33.429859},CZE:{lat:49.817492,lng:15.472962},DNK:{lat:56.26392,lng:9.501785},DJI:{lat:11.825138,lng:42.590275},DMA:{lat:15.414999,lng:-61.370976},DOM:{lat:18.735693,lng:-70.162651},ECU:{lat:-1.831239,lng:-78.183406},EGY:{lat:26.820553,lng:30.802498},SLV:{lat:13.794185,lng:-88.89653},GNQ:{lat:1.650801,lng:10.267895},ERI:{lat:15.179384,lng:39.782334},EST:{lat:58.595272,lng:25.013607},SWZ:{lat:-26.522503,lng:31.465866},ETH:{lat:9.145,lng:40.489673},FJI:{lat:-16.578193,lng:179.414413},FIN:{lat:61.92411,lng:25.748151},FRA:{lat:46.227638,lng:2.213749},GAB:{lat:-.803689,lng:11.609444},GMB:{lat:13.443182,lng:-15.310139},GEO:{lat:42.315407,lng:43.356892},DEU:{lat:51.165691,lng:10.451526},GHA:{lat:7.946527,lng:-1.023194},GRC:{lat:39.074208,lng:21.824312},GRD:{lat:12.262776,lng:-61.604171},GTM:{lat:15.783471,lng:-90.230759},GIN:{lat:9.945587,lng:-9.696645},GNB:{lat:11.803749,lng:-15.180413},GUY:{lat:4.860416,lng:-58.93018},HTI:{lat:18.971187,lng:-72.285215},VAT:{lat:41.902916,lng:12.453389},HND:{lat:15.199999,lng:-86.241905},HUN:{lat:47.162494,lng:19.503304},ISL:{lat:64.963051,lng:-19.020835},IND:{lat:20.593684,lng:78.96288},IDN:{lat:-.789275,lng:113.921327},IRN:{lat:32.427908,lng:53.688046},IRQ:{lat:33.223191,lng:43.679291},IRL:{lat:53.41291,lng:-8.24389},ISR:{lat:31.046051,lng:34.851612},ITA:{lat:41.87194,lng:12.56738},JAM:{lat:18.109581,lng:-77.297508},JPN:{lat:36.204824,lng:138.252924},JOR:{lat:30.585164,lng:36.238414},KAZ:{lat:48.019573,lng:66.923684},KEN:{lat:-.023559,lng:37.906193},KIR:{lat:-3.370417,lng:-168.734039},PRK:{lat:40.339852,lng:127.510093},KOR:{lat:35.907757,lng:127.766922},KWT:{lat:29.31166,lng:47.481766},KGZ:{lat:41.20438,lng:74.766098},LAO:{lat:19.85627,lng:102.495496},LVA:{lat:56.879635,lng:24.603189},LBN:{lat:33.854721,lng:35.862285},LSO:{lat:-29.609988,lng:28.233608},LBR:{lat:6.428055,lng:-9.429499},LBY:{lat:26.3351,lng:17.228331},LIE:{lat:47.166,lng:9.555373},LTU:{lat:55.169438,lng:23.881275},LUX:{lat:49.815273,lng:6.129583},MDG:{lat:-18.766947,lng:46.869107},MWI:{lat:-13.254308,lng:34.301525},MYS:{lat:4.210484,lng:101.975766},MDV:{lat:3.202778,lng:73.22068},MLI:{lat:17.570692,lng:-3.996166},MLT:{lat:35.937496,lng:14.375416},MHL:{lat:7.131474,lng:171.184478},MRT:{lat:21.00789,lng:-10.940835},MUS:{lat:-20.348404,lng:57.552152},MEX:{lat:23.634501,lng:-102.552784},FSM:{lat:7.425554,lng:150.550812},MDA:{lat:47.411631,lng:28.369885},MCO:{lat:43.750298,lng:7.412841},MNG:{lat:46.862496,lng:103.846656},MNE:{lat:42.708678,lng:19.37439},MAR:{lat:31.791702,lng:-7.09262},MOZ:{lat:-18.665695,lng:35.529562},MMR:{lat:21.913965,lng:95.956223},NAM:{lat:-22.95764,lng:18.49041},NRU:{lat:-.522778,lng:166.931503},NPL:{lat:28.394857,lng:84.124008},NLD:{lat:52.132633,lng:5.291266},NZL:{lat:-40.900557,lng:174.885971},NIC:{lat:12.865416,lng:-85.207229},NER:{lat:17.607789,lng:8.081666},NGA:{lat:9.081999,lng:8.675277},MKD:{lat:41.608635,lng:21.745275},NOR:{lat:60.472024,lng:8.468946},OMN:{lat:21.512583,lng:55.923255},PAK:{lat:30.375321,lng:69.345116},PLW:{lat:7.51498,lng:134.58252},PSE:{lat:31.952162,lng:35.233154},PAN:{lat:8.537981,lng:-80.782127},PNG:{lat:-6.314993,lng:143.95555},PRY:{lat:-23.442503,lng:-58.443832},PER:{lat:-9.189967,lng:-75.015152},PHL:{lat:12.879721,lng:121.774017},POL:{lat:51.919438,lng:19.145136},PRT:{lat:39.399872,lng:-8.224454},QAT:{lat:25.354826,lng:51.183884},ROU:{lat:45.943161,lng:24.96676},RUS:{lat:61.52401,lng:105.318756},RWA:{lat:-1.940278,lng:29.873888},KNA:{lat:17.357822,lng:-62.782998},LCA:{lat:13.909444,lng:-60.978893},VCT:{lat:12.984305,lng:-61.287228},WSM:{lat:-13.759029,lng:-172.104629},SMR:{lat:43.94236,lng:12.457777},STP:{lat:.18636,lng:6.613081},SAU:{lat:23.885942,lng:45.079162},SEN:{lat:14.497401,lng:-14.452362},SRB:{lat:44.016521,lng:21.005859},SYC:{lat:-4.679574,lng:55.491977},SLE:{lat:8.460555,lng:-11.779889},SGP:{lat:1.352083,lng:103.819836},SVK:{lat:48.669026,lng:19.699024},SVN:{lat:46.151241,lng:14.995463},SLB:{lat:-9.64571,lng:160.156194},SOM:{lat:5.152149,lng:46.199616},ZAF:{lat:-30.559482,lng:22.937506},SSD:{lat:6.876991,lng:31.306978},ESP:{lat:40.463667,lng:-3.74922},LKA:{lat:7.873054,lng:80.771797},SDN:{lat:12.862807,lng:30.217636},SUR:{lat:3.919305,lng:-56.027783},SWE:{lat:60.128161,lng:18.643501},CHE:{lat:46.818188,lng:8.227512},SYR:{lat:34.802075,lng:38.996815},TJK:{lat:38.861034,lng:71.276093},TZA:{lat:-6.369028,lng:34.888822},THA:{lat:15.870032,lng:100.992541},TLS:{lat:-8.874217,lng:125.727539},TGO:{lat:8.619543,lng:.824782},TON:{lat:-21.178986,lng:-175.198242},TTO:{lat:10.691803,lng:-61.222503},TUN:{lat:33.886917,lng:9.537499},TUR:{lat:38.963745,lng:35.243322},TKM:{lat:38.969719,lng:59.556278},TUV:{lat:-7.109535,lng:177.64933},UGA:{lat:1.373333,lng:32.290275},UKR:{lat:48.379433,lng:31.16558},ARE:{lat:23.424076,lng:53.847818},GBR:{lat:55.378051,lng:-3.435973},USA:{lat:37.09024,lng:-95.712891},URY:{lat:-32.522779,lng:-55.765835},UZB:{lat:41.377491,lng:64.585262},VUT:{lat:-15.376706,lng:166.959158},VEN:{lat:6.42375,lng:-66.58973},VNM:{lat:14.058324,lng:108.277199},YEM:{lat:15.552727,lng:48.516388},ZMB:{lat:-13.133897,lng:27.849332},ZWE:{lat:-19.015438,lng:29.154857}}[t]||{lat:0,lng:0}}async processWHOData(t){const r=[],n=new Map;t.forEach(s=>{if(s.SpatialDim&&s.SpatialDimType==="COUNTRY"&&s.NumericValue!==void 0&&s.NumericValue!==null){const m=s.SpatialDim;n.has(m)||n.set(m,[]),n.get(m).push(s)}}),await O.initialize();const l=Array.from(n.entries()),d=50;for(let s=0;s<l.length;s+=d){const i=l.slice(s,s+d).map(async([g,S])=>{const c=S.sort((p,y)=>(y.TimeDim||0)-(p.TimeDim||0))[0];if(c.NumericValue!==void 0&&c.NumericValue>=0){const p=this.getCountryCoordinates(g),[y,h]=await Promise.all([O.getFlagByCode(g),O.getCountryNameByCode(g)]);return{country:h,countryCode:g,cases:c.NumericValue,lat:p.lat,lng:p.lng,flag:y,countryName:h}}return null}),o=await Promise.all(i);r.push(...o.filter(g=>g!==null))}return r}}const G=new Te;function Le(){const{globalData:a,countries:t,selectedCountry:r,loading:n,fetchCountryHistory:l}=ye(),[d,s]=f.useState(null),[m,i]=f.useState(!1),[o,g]=f.useState(!1),[S,x]=f.useState([]),[c,p]=f.useState(null),[y,h]=f.useState(!1),[C,L]=f.useState({globalData:null,countries:[],selectedCountry:null,loading:!1});f.useEffect(()=>{O.initialize().catch(console.error)},[]);const U=b=>{s(b),i(!0),b.countryInfo.iso2&&l(b.countryInfo.iso2)},V=()=>{i(!1),s(null)},F=b=>{x(b),g(!0)},K=()=>{g(!1),x([])},_=async b=>{if(p(b),L(T=>({...T,loading:!0})),b.source==="covid")L({globalData:a,countries:t,selectedCountry:r,loading:n});else try{const T=await G.getDiseaseData(b),k=await G.processWHOData(T),Y=k.map(u=>({country:u.country,cases:u.cases,deaths:0,recovered:0,active:u.cases,critical:0,casesPerOneMillion:0,deathsPerOneMillion:0,tests:0,testsPerOneMillion:0,population:0,oneCasePerPeople:0,oneDeathPerPeople:0,oneTestPerPeople:0,activePerOneMillion:0,recoveredPerOneMillion:0,criticalPerOneMillion:0,continent:"Unknown",countryInfo:{_id:0,iso2:u.countryCode,iso3:u.countryCode,lat:u.lat,long:u.lng,flag:u.flag},updated:Date.now()}));let I;const v=k.filter(u=>u.cases>=0);if(b.code==="HIV_ARTCOVERAGE"){const u=v.map(M=>({...M,estimatedTreatment:Math.round(M.cases*1e3)})),j=u.reduce((M,J)=>M+J.estimatedTreatment,0),P=v.length>0?Math.round(j/v.length):0,$=v.length>0?Math.max(...u.map(M=>M.estimatedTreatment)):0;I={cases:j,deaths:$,recovered:P,active:j,critical:0,casesPerOneMillion:0,deathsPerOneMillion:0,tests:0,testsPerOneMillion:0,population:0,oneCasePerPeople:0,oneDeathPerPeople:0,oneTestPerPeople:0,activePerOneMillion:0,recoveredPerOneMillion:0,criticalPerOneMillion:0,updated:Date.now(),affectedCountries:v.length}}else if(b.code.startsWith("MENING_")||b.code.startsWith("TB_")||b.code.startsWith("WHS4_")||b.code.startsWith("MALARIA")){const u=v.reduce((j,P)=>j+P.cases,0);I={cases:u,deaths:0,recovered:0,active:u,critical:0,casesPerOneMillion:0,deathsPerOneMillion:0,tests:0,testsPerOneMillion:0,population:0,oneCasePerPeople:0,oneDeathPerPeople:0,oneTestPerPeople:0,activePerOneMillion:0,recoveredPerOneMillion:0,criticalPerOneMillion:0,updated:Date.now(),affectedCountries:v.length}}else I={cases:v.reduce((u,j)=>u+j.cases,0),deaths:0,recovered:0,active:v.reduce((u,j)=>u+j.cases,0),critical:0,casesPerOneMillion:0,deathsPerOneMillion:0,tests:0,testsPerOneMillion:0,population:0,oneCasePerPeople:0,oneDeathPerPeople:0,oneTestPerPeople:0,activePerOneMillion:0,recoveredPerOneMillion:0,criticalPerOneMillion:0,updated:Date.now(),affectedCountries:v.length};L({globalData:I,countries:Y,selectedCountry:null,loading:!1})}catch(T){console.error("Error fetching disease data:",T),L({globalData:null,countries:[],selectedCountry:null,loading:!1})}},Z=()=>{h(!y)},R=c?C:{globalData:a,countries:t,loading:n};return e.jsxs("div",{className:"app",children:[e.jsxs("header",{className:`app-header ${m||o?"dimmed":""}`,children:[e.jsx("h1",{className:"app-title",children:"🌍 Global Disease Tracker"}),c&&R.globalData&&e.jsxs("div",{className:"header-stats fade-in",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:R.globalData.cases.toLocaleString()}),e.jsx("div",{className:"stat-label",children:c.code==="HIV_ARTCOVERAGE"?"People in Treatment":"Total Cases"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:R.globalData.affectedCountries}),e.jsx("div",{className:"stat-label",children:"Countries"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:c.name}),e.jsx("div",{className:"stat-label",children:"Disease"})]})]})]}),e.jsxs("div",{className:`disease-selector-sidebar slide-in-left ${m||o?"hidden":""} ${y?"mobile-open":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h3",{className:"sidebar-title",children:"Select Disease to Track"}),e.jsx("p",{className:"sidebar-subtitle",children:"Choose from global health datasets to explore on the interactive globe"})]}),e.jsx("div",{className:"sidebar-content",children:e.jsx(Ne,{onDiseaseSelect:b=>{_(b),h(!1)},selectedDisease:c})})]}),e.jsx("button",{className:"mobile-toggle",onClick:Z,"aria-label":"Toggle disease selector",children:y?"✕":"🦠"}),e.jsx("main",{className:"main-container",children:c?R.loading?e.jsxs("div",{className:"loading-spinner fade-in",children:[e.jsx("div",{className:"spinner"}),e.jsxs("p",{children:["Loading ",c.name," data..."]})]}):e.jsx("div",{className:"dashboard fade-in",children:e.jsxs("div",{className:"dashboard-main",children:[e.jsx("div",{className:"globe-container",children:e.jsx(ve,{countries:R.countries,onCountryClick:U})}),e.jsxs("div",{className:"dashboard-panels slide-in-right",children:[e.jsx("div",{className:"dashboard-panel",children:e.jsx(Se,{globalData:R.globalData,selectedDisease:c})}),C.selectedCountry&&e.jsx("div",{className:"dashboard-panel",children:e.jsx(Ce,{country:C.selectedCountry})}),e.jsx("div",{className:"dashboard-panel",children:e.jsx(Re,{countries:R.countries,onOpenComparison:F})})]})]})}):e.jsxs("div",{className:"welcome-screen fade-in",children:[e.jsx("div",{className:"welcome-icon",children:"🌍"}),e.jsx("h2",{className:"welcome-title",children:"Explore Global Health Data"}),e.jsx("p",{className:"welcome-subtitle",children:"Track diseases worldwide with interactive visualizations. Select a disease from the sidebar to begin exploring real-time health data across the globe."}),e.jsxs("button",{className:"welcome-cta",onClick:()=>h(!0),children:[e.jsx("span",{children:"🦠"}),"Get Started"]})]})}),e.jsx(je,{country:d,isOpen:m,onClose:V}),e.jsx(Me,{isOpen:o,onClose:K,selectedCountries:S,countries:R.countries})]})}z.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(Le,{})}));
